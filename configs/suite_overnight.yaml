# Ultra-fast A100 config - designed to finish in ~8-10 hours
# Uses full 40GB VRAM with high batch sizes

dataset: "gsm8k"
split: "test"
limit: null
seed: 42

# A100-optimized settings
model_name: "Qwen/Qwen2.5-7B-Instruct"
max_new_tokens: 256

# A100 optimizations
use_flash_attention: true
use_compile: false

# LEAN config: 1 dataset, 100 examples
datasets: ["gsm8k"]  # Just GSM8K for speed
dataset_limits:
  gsm8k: 100       # Keep at 100 for statistical validity

policies: ["cot"]  # Just CoT (most important)

methods:
  # === BASELINES (fast) ===
  - name: "greedy"
    policy: "cot"

  # Self-consistency with HIGH batch size (uses more VRAM)
  - name: "self_consistency"
    policy: "cot"
    n_values: [5, 10, 20]  # 3 configs instead of many
    batched: true
    batch_size: 20  # Process 20 prompts at once

  # Best-of-N with batching
  - name: "best_of_n"
    policy: "cot"
    n_values: [5, 10, 20]
    batched: true
    batch_size: 20

  # === YOUR NOVEL METHODS ===
  
  # Anytime SC - 2 allocations only (UCB is the one that matters)
  - name: "anytime_sc"
    policies: ["cot"]
    budgets: [512, 1024, 2048]  # 3 budgets
    deltas: [0.05]
    allocation: "ucb"

  - name: "anytime_sc"
    policies: ["cot"]
    budgets: [512, 1024, 2048]
    deltas: [0.05]
    allocation: "uniform"

  # Global Anytime SC - THE MAIN CONTRIBUTION
  # Only 2 policies Ã— 3 budgets = 6 configs (instead of 20)
  - name: "global_anytime_sc"
    policy: "cot"
    global_budget_tokens: [20000, 50000, 100000]  # 3 budgets
    init_k: 1
    allocation_policy: ["ucb", "uniform"]  # Only 2 (the key comparison)
    max_samples_per_item: 20
    temperature: 0.7
    store_allocation_steps: false  # Disable for speed

output_dir: "outputs/runs/"
